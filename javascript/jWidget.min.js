/*! jWidget v2.0 | (c) 2013 - 2014, Massive Dynamic - Michael Ochmann
*/
$("document").ready(function(){jWidget.init(),jWidget.registerWidget("Mensa","#079300",1,3,1,1,60),jWidget.registerWidget("Wetterstation","#004080",1,1,4,3,1),jWidget.registerWidget("Bus","#800080",1,2,4,1,5),jWidget.registerWidget("xkcd","#FFFFFF",2,2,2,1,6),jWidget.registerWidget("Console","#000000",2,1,2,3,30)});var jWidget=jWidget||{margin:5,maxCols:4,maxRows:3,background:"",gridster:"",refreshTime:1,listOfItems:[],jsMaxInt:Math.pow(2,32)-2,registerWidget:function(e,t,i,s,r,d,g){widget=new Widget(e,t,i,s,r,d,g),widget.refresh()},refresh:function(){jWidget.listOfItems.forEach(function(e){0!=e.refreshTime&&jWidget.refreshTime%e.refreshTime===0&&e.refresh(),jWidget.refreshTime>=jWidget.jsMaxInt&&(jWidget.refreshTime=0)}),jWidget.refreshTime+=1},init:function(){jWidget.gridster=$(".gridster ul").gridster({widget_margins:[jWidget.margin,jWidget.margin],widget_base_dimensions:[$(window).width()/4-2*jWidget.margin,$(window).height()/3-2*jWidget.margin],max_cols:jWidget.maxCols,max_size_x:jWidget.maxRows}).data("gridster"),setInterval(jWidget.refresh,6e4)}},Widget=function(e,t,i,s,r,d,g){this.name=e,this.color=t,this.width=i,this.height=s,this.row=r,this.col=d,this.DOM=null,this.title=null,this.refreshTime=g,$.getScript("widgets/"+this.name+"/java.js"),$("<link/>",{rel:"stylesheet",type:"text/css",href:"widgets/"+this.name+"/style.css"}).appendTo("head"),jWidget.listOfItems.push(this),jWidget.gridster.add_widget("<li id='"+this.name+"' style='background: "+this.color+";'></li>",this.width,this.height,this.row,this.col),this.DOM=$("#"+this.name),this.title=$("#"+this.name+" > h2.widgetTitle")};Widget.prototype.refresh=function(){$this=this,this.DOM.load("widgets/"+this.name,function(){$this.title.css({background:$this.color,width:$this.DOM.width()-40+"px"})})};